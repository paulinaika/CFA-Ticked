<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

  <script>
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
      markers = handler.addMarkers([

        <% @ticks.each do |tick| %>
          {
            "lat": <%= tick.latitude %>,
            "lng": <%= tick.longtitude %>,
            "picture": {
              "width":  32,
              "height": 32,
            },
            "infowindow": "<%= tick.scientific_name %>"
          },
        <% end %>
      ]);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });
  </script>
